<!DOCTYPE html>
<html>
 
<head>
  
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width" />
  <title>Virus Detected!</title>

  <link rel="stylesheet" href="styles/flexbox-center-container.css" media="all">
  <link rel="stylesheet" href="styles/system-fonts.css" media="all">
  <link rel="stylesheet" href="styles/style.css" media="all">
</head>

<body>
  <canvas id=c></canvas>
  <canvas id="confetti"></canvas>
  <div class="container" id="count">
    <h1 id="head">Don't miss out!</h1>
    <ul>
      <li><span id="day"></span>days</li>
      <li><span id="hour"></span>hours</li>
      <li><span id="minute"></span>minutes</li>
      <li><span id="second"></span>seconds</li>
    </ul>
  </div>
  <div id="merrywrap" class="merrywrap">
    <canvas id="snowfall"></canvas>
    
    <script>
      function play() {
        var audio = document.getElementById("audio");
        audio.play();
      }  
      </script>
    
    <div type="button" value="submit" onclick=play() class="giftbox">
      

      <audio autoplay id="audio" src="audioclip-1525698848000-79935.mp3"></audio>
      
      <div class="cover">
        <div></div>
      </div>
      <div class="box"></div>
      
    </div>
</body>
<script src="scripts/confetti.min.js" charset="utf-8"></script>
<script src="scripts/index.js" charset="utf-8"></script>



<div style="color: white;">
  <!script>
    window.addEventListener('load', () => document.querySelector('.code-container').appendChild(document.createTextNode(document.querySelector('.source-code').innerText)));
  </!script>
  <!script class="source-code">
    window.addEventListener('load', () => {
      // noinspection JSUnresolvedVariable
      let audioCtx = new (window.AudioContext || window.webkitAudioContext)();
      let xhr = new XMLHttpRequest();
      xhr.open('GET', 'audioclip-1525698848000-79935.mp3');
      xhr.responseType = 'arraybuffer';
      xhr.addEventListener('load', () => {
        let playsound = (audioBuffer) => {
          let source = audioCtx.createBufferSource();
          source.buffer = audioBuffer;
          source.connect(audioCtx.destination);
          source.loop = false;
          source.start();

          setTimeout(function () {
            let t = document.createElement('p');
            t.appendChild(document.createTextNode((new Date()).toLocaleString() + ': Sound played'));
            document.querySelector('.output').appendChild(t);
            playsound(audioBuffer);
          }, 1000 + Math.random()*2500);
        };

        audioCtx.decodeAudioData(xhr.response).then(playsound);
      });
      xhr.send();
    });
  </!script>
  </head>
  <body>

  <pre><code lang="zxx-js" class="code-container"></code></pre>


  <div class="output"></div>
  </body>
</div>



</html>
